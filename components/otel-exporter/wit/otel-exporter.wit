package wasmcp:otel-exporter@0.1.0;

interface api {
    use wasi:otel/tracing@0.2.0-draft.{span-context};

    resource span {
        constructor(name: string, parent-context: option<span-context>);

        add-event: func(name: string);
        finish: func();
    }

    get-context: func(s: borrow<span>) -> span-context;
    get-current-span: func() -> option<span>;
}

world otel-exporter {
    // Export both our API and the WASI OTEL tracing interface
    export api;
    export wasi:otel/tracing@0.2.0-draft;

    // Import user's provider configuration (optional)
    import otel-provider-config;
}